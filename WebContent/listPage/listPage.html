<!DOCTYPE html>
<html>

<head>

	<meta charset="utf-8" />
	<meta name="author" content="Script Tutorials" />

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">

	<!-- Goggle Font -->
	<link href='https://fonts.googleapis.com/css?family=Lato:400,700,900,300' rel='stylesheet' type='text/css'>

	<!-- Font Css -->
	<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">

	<!-- Custom CSS -->
	<link rel="stylesheet" type="text/css" href="css/style.css">

	<!-- Animation Css -->
	<link rel="stylesheet" href="css/animate.css">

	<!-- add styles -->
	<link href="css/main.css" rel="stylesheet" type="text/css" />

	<title>Whirling dropdown menu | Script Tutorials</title>

	<script src="js/jquery-3.6.0.min.js"></script>
</head>

<body>
	<header>
		<div class="container" id="main" role="main">
			<div>
				<a href="#toMainPage"><img id="logo" src="images/logo.jpg"></a>
			</div>
			<ul class="menu">
				<li><a href="#toListAllPage">Genre</a>
					<ul class="submenu">
						<li><a href="javascript:void(0);" onclick="division('action')">Action</a></li>
						<li><a href="javascript:void(0);" onclick="division('animation')">Animation</a></li>
						<li><a href="javascript:void(0);" onclick="division('romance')">Romance</a></li>
					</ul>
				</li>
				<li id="logout"><a href="#toLogoutPage">Log Out</a></li>
				<!--#toLogoutPage도 구현-->
			</ul>
		</div>
	</header><!-- End Header -->

	<!-- portfolio -->
	

	<section class="portfolio">
		<div class="container">
			<div class="row">

				<!--
				<div>
					<a href=""><img src="images/Action/007노타임투다이.jpg"></a>
				</div>
				<div>
					<img src="images/Action/가디언즈오브갤럭시2.jpg">
				</div>
				<div>
					<img src="images/Action/어벤져스.jpg">
				</div>
				<div>
					<img src="images/Action/모가디슈.jpg">
				</div>
				<div>
					<img src="images/Action/배트맨.jpg">
				</div>
				<div>
					<img src="images/Action/블랙위도우.jpg">
				</div>
				<div>
					<img src="images/Action/베놈2.jpg">
				</div>
				<div>
					<img src="images/Action/스파이더맨.jpg">
				</div>
				<div>
					<img src="images/Action/조커.jpg">
				</div>
				<div>
					<img src="images/Action/기생충.jpg">
				</div>
				애니메이션
				<div>
					<img src="images/Animation/겨울왕국.jpg">
				</div>
				<div>
					<img src="images/Animation/미녀와야수.jpg">
				</div>
				<div>
					<img src="images/Animation/인사이드아웃.jpg">
				</div>
				<div>
					<img src="images/Animation/토이스토리4.jpg">
				</div>
				<div>
					<img src="images/Animation/업.jpg">
				</div>
				<div>
					<img src="images/Animation/알라딘.jpg">
				</div>
				<div>
					<img src="images/Animation/해리포터.jpg">
				</div>
				<div>
					<img src="images/Animation/보스베이비.jpg">
				</div>
				<div>
					<img src="images/Animation/라따뚜이.jpg">
				</div>
				<div class="last-img">
					<img src="images/Animation/소울.jpg">
				</div>
				-->
			</div><!-- End row -->
		</div><!-- End container -->
	</section>

	<!-- Call to Action -->
	<section class="call-top-action text-center">
		<div class="container">
			<div>
				<div class="col-md-12">
					<h1>many variations of passages</h1>
					<p>There are many variations of passages of Lorem Ipsum available, but the majority have suffered
						alteration
						<br />
						in some form, by injected humour, or randomised words which don't look even slightly believable
					</p>
					<span>LOREM IPSUM</span>
				</div><!-- End col-md-12 -->
			</div><!-- End row -->
		</div><!-- End container -->
	</section>

	<!-- Footer -->
	<footer>
		<ul class="in-line">
			<li><a href="https://www.facebook.com/"><span><i class="fa fa-facebook"></i></span></a></li>
			<li><a href="https://www.twitter.com/"><span><i class="fa fa-twitter"></i></span></a></li>
			<li><a href="https://www.youtube.com/"><span><i class="fa fa-youtube"></i></span></a></li>
		</ul>
		<span class="copyright">&#169; Untitled . All rights reserved. Create By <a
				href="https://blog.naver.com/sov02">Donggwan & Eunjin</a></span>
	</footer>


	<script>
		let movieAry = [];

		function makeMovieDiv(movie) {
			console.log(movie.movie_id);
			console.log(movie.title);
			console.log(movie.genre);

			let innerDiv = document.createElement('div');
			innerDiv.setAttribute('id', movie.genre)

			let aTag = document.createElement('a');
			aTag.setAttribute('href', 'movieDetail.jsp?movieId=' + movie.movie_id);

			let img = document.createElement('img');
			img.setAttribute('src', 'images/' + movie.genre + '/' + movie.poster);
			console.log(movie.poster);

			aTag.appendChild(img);
			innerDiv.appendChild(aTag);

			return innerDiv;
		}


		function division(genre) {
			let list = document.querySelector('section.portfolio>div>div');
			$(list).empty();
			for (movie of movieAry) {
				if (movie.genre == genre) {
					list.appendChild(makeMovieDiv(movie));
				}
			}
		}

		//아작스 호출
		let xhtp = new XMLHttpRequest();
		xhtp.open('get', '../MovieServlet');
		xhtp.send();
		xhtp.onload = function () {
			let movies = JSON.parse(xhtp.responseText);
			console.log(movies)
			let list = document.querySelector('section.portfolio>div>div');			
			for(let movie of movies) {
				list.appendChild(makeMovieDiv(movie));
				movieAry.push(movie);
			}
			 
		}
	</script>


</body>

</html>